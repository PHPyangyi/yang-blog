<html xmlns:th="http://www.thymeleaf.org"
      th:replace="backend/layout/meta">
</html>

<div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12" id="app">
    <div class="content">
        <div id="add-form" class="form-horizontal nice-validator n-default n-bootstrap" role="form"
             data-toggle="validator" method="POST" action="" novalidate="novalidate">

            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-2">角色编码:</label>
                <div class="col-xs-12 col-sm-8">
                    <input id="code" class="form-control" v-model='code' name="code" type="text" disabled>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-2">角色名称:</label>
                <div class="col-xs-12 col-sm-8">
                    <input id="name" class="form-control" v-model='name' name="name" type="text" disabled>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-2">备注:</label>
                <div class="col-xs-12 col-sm-8">
                    <textarea style="resize:none;min-height: 100px" id="remarks" class="form-control" v-model='remarks'
                              name="remarks" type="text" disabled></textarea>
                </div>
            </div>

        </div>
    </div>
</div>


<html xmlns:th="http://www.thymeleaf.org"
      th:replace="backend/layout/jsscript">
</html>
<div th:fragment="footer-js">
    <script>
        axios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'
        axios.interceptors.request.use(function (config) {
            layer.load(1, {
                shade: [0.2, '#fff'] //0.1透明度的白色背景
            });
            return config;
        }, function (err) {
            layer.alert('未知错误，请刷新重试！');
        });

        new Vue({
            el: "#app",
            data: {
                code: '',
                name: '',
                remarks: '',
            },
            methods: {
                initData: function (id) {
                    let that = this;
                    axios({
                        url: "/admin/auth/role/find/" + id,
                        method: "get",
                    }).then(function (response) {
                        layer.closeAll('loading'); //关闭加载层
                        let data = response.data;
                        that.code = data.data.code;
                        that.name = data.data.name;
                        that.remarks = data.data.remarks;
                    }).catch(function () {
                        layer.closeAll('loading'); //关闭加载层
                        //初体验
                        layer.alert('数据交互失败！', {
                            icon: 2,
                        })
                    })
                },
                getUrlKey: function (name) {
                    return decodeURIComponent(
                        (new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.href) || [, ""])[1].replace(/\+/g, '%20')) || null;
                }
            },
            mounted: function () {
                let id = this.getUrlKey("id");
                this.initData(id)
            }
        });
    </script>
</div>



